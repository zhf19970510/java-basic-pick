## java面试题记录

1. 说一下JVM的主要组成部分及其作用？

JVM包含两个子系统和两个组件，两个子系统为Classs loader(类装载)、Execution engine(执行引擎)；两个组件为 Runtime data area(运行时数据区)、Native Interface(本地接口).
  Class loader(类装载):根据给定的全限定名类名来装载class文件到Runtime data area中的method area。
  Execution engine(执行引擎)：执行classes中的指令。
  Native Interface(本地接口)：与 native libraries交互，是其它编程语言交互的接口。
  Runtime data area(运行时数据区域)：这就是我们常说的 JVM 的内存。
作用：首先通过编译器吧Java代码转换为字节码，类加载器（ClassLoader）再把字节码加载到内存中，将其放在运行时数据区（Runtime data area）的方法区内，而字节码文件只是JVM的一套指令集规范，并不能直接交给底层操作系统执行，因此需要特定的命令解析器执行引擎（Execution engine），将字节码翻译成底层系统指令，再交由CPU去执行，而这个过程中需要调用其他语言的本地库接口（Native Interface）来实现整个程序的功能。

2. mysql索引设计的原则有哪些？

1. 适合索引的列是出现在where子句中的列，或者连接子句中指定的列；
2. 基数较小的类，索引效果较差，没有必要在此列建立索引；
3. 使用短索引，如果对长字符串列进行索引，应该指定一个前缀长度，这样能够节省大量索引空间；
4. 不要过度索引，索引需要额外的磁盘空间，并降低写操作的性能。在修改表内容的时候，索引会进行更新甚至重构，索引列越多，这个时间就会越长。索引只保持需要的索引有利于查询即可。

3. 并发编程三要素是什么？在Java程序中怎么保证多线程的运行安全？

   并发编程的三要素（线程安全性问题体现在）：

   原子性：原子，即一个不可再分割的颗粒。原子性指的是一个或多个操作要么全部执行成功要么全部执行失败。

   可见性：一个线程对共享变量的修改，另一个线程能够立刻看到。（synchronized, volatile）

   有序性：程序执行的顺序按照代码的先后顺序。（处理器可能会对指令进行重排序）

   出现线程安全问题的原因：

   - 线程切换带来的原子性问题
   - 缓存导致的可见性问题
   - 编程优化带来的有序性问题

   解决办法：

   JDK Atomic开头的原子类、sychroneizd、LOCK，可以解决原子性问题

   synchronized、volatile、LOCK，可以解决可见性问题

   Happens-Before 规则可以解决有序性问题

