RDB与aof对比

| 命令       | RDB          | AOF          |
| ---------- | ------------ | ------------ |
| 启动优先级 | 低           | 高           |
| 体积       | 小           | 大           |
| 恢复速度   | 快           | 慢           |
| 数据安全性 | 容易丢失数据 | 根据策略决定 |

生产环境都可以启用，redis启用的时候如果既有RDB文件，又有aof文件，则优先选择aof文件恢复，因为aof一般来说数据更安全一点。

#### Redis 混合持久化（必须先开启aof）

```bash
aof-use-rdb-preamble yes
```

Redis数据备份策略：

	1. 写crontab定时脚本，每小时都copy一份rdb或aof的备份到一个目录中qu，仅仅保留最近48小时的备份
 	2. 每天都保留一份当日的数据备份到一个目录中去，可以保留最近一个月的备份
 	3. 每次copy备份的时候，都把太旧的备份给删了
 	4. 每天晚上将当前机器上的备份复制一份到其他机器上，以防机器损坏

